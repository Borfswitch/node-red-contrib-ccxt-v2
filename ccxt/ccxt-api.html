<script type="text/javascript">
    RED.nodes.registerType("ccxt-api", {
        category: "CryptoExchange",
        defaults: {
            name: { value: "" },
            exchange: { value: "", required: true },
            apitype: { value: "", required: true },
            customapitype: { value: "", required: false },
            api: { value: "", required: true },
            apiprivate: { value: "false", required: true },
            loadmarketsreload: { value: false },
            symbol: { value: "", required: false },
            symbolType: { value: "str", required: false },
            limit: { value: undefined, required: false },
            since: { value: undefined },
            timeframe: { value: "1m" },
            ordertype: { value: "limit" },
            orderside: { value: "buy" },
            amount: { value: "" },
            orderprice: { value: "" },
            orderid: { value: "" },
            code: { value: "" },
            address: { value: "" },
            tag: { value: "" },

            apisecrets: { type: "ccxt-exchange", required: false },
            apipayloadType: { value: "none" },
            //TODO: fix this problem. the validator is attached regardless of whether the api requires
            //a payload or not
            apipayload: {
                value: "",
                required: false
                //validate: RED.node.vali
                //         validate: function(v) {
                //             console.log(
                //                 "value is",
                //                 v,
                //                 "type is:",
                //                 $("#node-input-payloadType").val()
                //             );
                //             if (!v) {
                //                 $("#node-input-payloadType").val("none");
                //                 return true;
                //             }
                //             if ($("#node-input-payloadType").val() === "json") {
                //                 console.log("checking for valid json");
                //                 try {
                //                     JSON.parse(v);
                //                 } catch (e) {
                //                     console.log("bad json");
                //                     return false;
                //                 }
                //                 return true;
                //             }
                //             if (this.payloadType === "json") {
                //                 console.log("node value checking for valid json");
                //                 try {
                //                     JSON.parse(v);
                //                 } catch (e) {
                //                     return false;
                //                 }
                //                 return true;
                //             }

                //             console.log("all failed returning true");
                //             return true;
                //         }
                //     }
            }
        },
        outputs: 1,
        inputs: 1,
        color: "#D8BFD8",
        icon: "bitcoin-symbol.png",
        label: function() {
            return this.name || "ccxt API";
        },
        oneditprepare: function() {
            var node = this;

            //expermentation here
            $("#node-input-exchange").select2();
            $("#id-input-select-symbol").select2();

            $("#node-input-apipayload")
                .typedInput({
                    typeField: $("#node-input-apipayloadType"),
                    types: [
                        { value: "none", label: "None", hasValue: false },
                        "json",
                        "msg",
                        "flow",
                        "global"
                    ]
                })
                .typedInput("width", "68%");
            $("#node-input-symbol")
                .typedInput({
                    typeField: $("#node-input-symbolType"),
                    //  default: ["symbolslist"],
                    types: [
                        {
                            value: "symbolslist",
                            label: "Symbol",
                            icon: "red/images/typedInput/09.png",
                            options: ["None"]
                        },
                        "str",
                        "msg",
                        "flow",
                        "global"
                    ]
                })
                .typedInput("width", "68%");
            // $("#node-input-timeframe")
            //     .typedInput({
            //         //   typeField: $("#node-input-payloadType"),
            //         types: ["str", "msg", "flow", "global"]
            //     })
            //     .typedInput("width", "68%");
            function getSymbols(ex, callback) {
                //return empty array if no exchange
                let symbolslist = [];

                // let exchange = ex;
                let apitype = $(
                    "#node-input-apitype option:selected"
                ).val();
                let api = $("#node-input-api option:selected").val();
                console.log(
                    "symbol typedinput function...",
                    ex,
                    apitype,
                    api
                );
                if (ex === undefined || ex === "") return [];
                $.getJSON("exchangesymbols", { exchange: ex }, function(
                    result
                ) {
                    console.log(result.symbols);
                    if (callback && typeof callback == "function") {
                        console.log("will call back now..");
                        callback(result.symbols);
                    }
                });
                //return symbolslist;
            }
            let showhideInputFields = function() {
                let exchange = $(
                    "#node-input-exchange option:selected"
                ).val();
                let apitype = $(
                    "#node-input-apitype option:selected"
                ).val();
                let api = $("#node-input-api option:selected").val();
                console.log(
                    "showhideinputfields for ...",
                    exchange,
                    apitype,
                    api
                );
                if (!$("#id-input-apipayload").val())
                    apitype === "customAPI"
                        ? $("#id-input-apipayloadType").val("json")
                        : $("#id-input-apipayloadType").val("none");
                if (exchange !== undefined && exchange !== "") {
                    if (apitype === "customAPI") {
                        $("#id-anchor-display-exchange-apidoc").attr(
                            "href",
                            $("#node-input-exchange option:selected").attr(
                                "apidoc"
                            )
                        );
                    } else {
                        $("#id-anchor-display-exchange-apidoc").attr(
                            "href",
                            "https://ccxt.readthedocs.io/en/latest/manual.html#api-methods-endpoints"
                        );
                    }
                }

                if (exchange !== undefined && exchange !== "") {
                    $("#id-img-display-exchange-homepage").attr(
                        "href",
                        $("#node-input-exchange option:selected").attr(
                            "homepage"
                        )
                    );
                    $("#id-anchor-display-exchange-homepage").attr(
                        "href",
                        $("#node-input-exchange option:selected").attr(
                            "homepage"
                        )
                    );
                    $("#id-anchor-display-exchange-img").attr(
                        "src",
                        $("#node-input-exchange option:selected").attr(
                            "logo"
                        )
                    );
                    $("#id-anchor-display-exchange-img").attr(
                        "alt",
                        $("#node-input-exchange option:selected").text()
                    );
                }

                //hide all params by default
                $(".node-input-private-api").hide();
                $(".node-input-unified-api-symbol").hide();
                $(".node-input-unified-api-load-markets").hide();
                $(".node-input-unified-api-limit").hide();
                $(".node-input-unified-api-since").hide();
                $(".node-input-unified-api-ordertype").hide();
                $(".node-input-unified-api-orderside").hide();
                $(".node-input-unified-api-amount").hide();
                $(".node-input-unified-api-orderprice").hide();
                $(".node-input-unified-api-orderid").hide();
                $(".node-input-unified-api-timeframe").hide();
                $(".node-input-unified-api-code").hide();
                $(".node-input-unified-api-address").hide();
                $(".node-input-unified-api-tag").hide();
                $(".node-input-api-custom").hide();

                // for customAPI show the API Payload parameter only
                if (apitype === "customAPI") {
                    $(".node-input-api-custom").show();
                    //console.log('isPrivate :', isPrivate);
                }

                // Get the params for the unified API if an API is selected
                if (apitype === "unifiedAPI") {
                    if (api !== undefined && api !== "") {
                        console.log("calling ...for", api);
                        $.getJSON("apiparams", { api: api }, function(
                            result
                        ) {
                            result.apiparams.map(function(x) {
                                if (x === "symbol") {
                                    console.log("x is symbol");
                                    // $("#node-input-symbolType").val(
                                    //     "symbolslist"
                                    // );
                                    //var symbols = await getSymbols();
                                    //  console.log("symbols are:", symbols);
                                    getSymbols(exchange, function(
                                        symbols
                                    ) {
                                        symbols.forEach(function(element) {
                                            $(
                                                "#id-input-select-symbol"
                                            ).append(
                                                $("<option>", {
                                                    value: element,
                                                    text: element
                                                })
                                            );
                                        });

                                        // $("#node-input-symbol").typedInput(
                                        //     "types",
                                        //     [
                                        //         {
                                        //             value: "symbolslist",
                                        //             label: "Symbol",
                                        //             icon:
                                        //                 "red/images/typedInput/09.png",
                                        //             options: symbols
                                        //         },
                                        //         "str",
                                        //         "msg",
                                        //         "flow",
                                        //         "global"
                                        //     ]
                                        // );
                                        // $("#node-input-symbolType").val(
                                        //     "symbolslist"
                                        // );
                                    });
                                }
                                if (x === "apipayload")
                                    $(".node-input-api-custom").show();
                                else
                                    $(
                                        ".node-input-unified-api-" + x
                                    ).show();
                            });
                            console.log(
                                "all loaded unified api params are",
                                result
                            );
                        });
                    }
                }
                var isPrivate = $("#node-input-api option:selected").attr(
                    "isprivate"
                );
                console.log("isPrivate : ", isPrivate);
                if (isPrivate === "true")
                    $(".node-input-private-api").show();
                else $(".node-input-private-api").hide();
            };
            // retrieve Exchanges from CCXT node package
            let getExchanges = function() {
                var exchangeElement = $("#node-input-exchange");
                $.getJSON("exchanges", function(result) {
                    exchangeElement.empty();
                    exchangeElement.append(
                        $("<option>", {
                            value: "",
                            text: ""
                        })
                    );
                    console.log("loading exchanges ...");
                    $.each(result.exchange, function(key, value) {
                        exchangeElement.append(
                            $("<option />")
                                .val(key)
                                .text(value[0])
                                .attr("homepage", value[1])
                                .attr("logo", value[2])
                                .attr("apidoc", value[3])
                        );
                    });
                    console.log("node exchange is : " + node.exchange);
                    exchangeElement.val(node.exchange);
                    var exchange = $("#node-input-exchange").val();
                    // Setting the dropdown value from javascript (using val()), won't trigger the change-event automatically
                    $("#node-input-exchange").trigger("change");
                    // if (
                    //     exchange === node.exchange &&
                    //     // exchange !== node.exchange &&
                    //     node.exchange !== undefined
                    // ) {
                    //     //$("#node-input-exchange").trigger("change");
                    //     console.log("is it calling here??");
                    //     var apitype = $("#node-input-apitype").val();
                    //     if (apitype === "unifiedAPI")
                    //         getunifiedAPIs(exchange);
                    //     if (apitype === "customAPI")
                    //         getcustomAPIs(exchange);
                    // }
                }).error(function(error) {
                    console.log(error);
                });
            };
            getExchanges();
            // retrieve API types from CCXT node package

            getunifiedAPIs = function(exchange) {
                console.log("getUnifiedAPIs for exchange...", exchange);
                var apiElement = $("#node-input-api");
                apiElement.empty();
                apiElement.append(
                    $("<option />")
                        .val("loadMarkets")
                        .text("loadMarkets")
                );
                if (exchange === undefined || exchange === "") return;
                $.getJSON("exchangecaps", { exchange: exchange }, function(
                    result
                ) {
                    result.caps.forEach(function(element) {
                        apiElement.append(
                            $("<option>", {
                                value: element[0],
                                text: element[0],
                                isprivate: element[1]
                            })
                        );

                        //console.log(element);
                    });
                    // sort on text
                    apiElement.html(
                        apiElement.find("option").sort(function(x, y) {
                            // to change to descending order switch "<" for ">"
                            return $(x).text() > $(y).text() ? 1 : -1;
                        })
                    );

                    apiElement.val(node.api);
                    // Setting the dropdown value from javascript (using val()), won't trigger the change-event automatically
                    $("#node-input-api").trigger("change");
                    //showhideInputFields();
                }).error(function(error) {
                    console.log(error);
                });
                //
            };
            // retrieve APIs from CCXT node package
            getcustomAPIs = function(exchange) {
                //$.getJSON('apis', { exchange: exchange, apitype: apiType }, function (result) {
                // var i = 0;
                //var apis = {};

                console.log("getcustomAPIs for exchange...", exchange);
                var apiElement = $("#node-input-api");
                var api = $("#node-input-api option:selected").val();
                apiElement.empty();
                if (exchange === undefined || exchange === "") return;

                $.getJSON("apis", { exchange: exchange }, function(
                    result
                ) {
                    $.each(Object.keys(result.api), function(
                        index,
                        apitype
                    ) {
                        $.each(Object.keys(result.api[apitype]), function(
                            index,
                            verb
                        ) {
                            $.each(result.api[apitype][verb], function(
                                index,
                                api
                            ) {
                                apiElement.append(
                                    $("<option>", {
                                        value: verb + "_" + api,
                                        text: verb + "_" + api,
                                        customapitype: apitype,
                                        isprivate: apitype === "private"
                                    })
                                );
                            });
                        });
                    });
                    // sort on text
                    apiElement.html(
                        apiElement.find("option").sort(function(x, y) {
                            // to change to descending order switch "<" for ">"
                            return $(x).text() > $(y).text() ? 1 : -1;
                        })
                    );
                    // set actual value
                    apiElement.val(node.api);
                    // Setting the dropdown value from javascript (using val()), won't trigger the change-event automatically
                    if (api !== node.api)
                        $("#node-input-api").trigger("change");
                    // showhideInputFields();
                }).error(function(error) {
                    console.log(error);
                });

                //
            };

            // Exchange change event
            $("#node-input-exchange").change(function() {
                console.log("exchange change event ...");
                //var api = $("#node-input-api option:selected").val();
                var exchange = $(
                    "#node-input-exchange option:selected"
                ).val();
                //  console.log('exchange selected:{}, api is: {}', exchange, api);
                var apitype = $("#node-input-apitype").val();
                var apiElement = $("#node-input-api");
                apiElement.empty();

                showhideInputFields();
                if (
                    //  exchange !== node.exchange &&
                    exchange !== undefined &&
                    exchange !== ""
                ) {
                    if (apitype === "unifiedAPI") getunifiedAPIs(exchange);
                    if (apitype === "customAPI") getcustomAPIs(exchange);
                }
            });

            // API type change event
            $("#node-input-apitype").change(function() {
                //   var api = $("#node-input-api option:selected").val();

                var exchange = $(
                    "#node-input-exchange option:selected"
                ).val();
                var apitype = $(
                    "#node-input-apitype option:selected"
                ).val();
                console.log(
                    "API type change event ...exchange&apitype",
                    exchange,
                    apitype
                );
                //empty the api because the type has changed
                var apiElement = $("#node-input-api");
                apiElement.empty();
                showhideInputFields();

                if (exchange !== undefined && exchange !== "") {
                    if (apitype === "customAPI") getcustomAPIs(exchange);
                    if (apitype === "unifiedAPI") getunifiedAPIs(exchange);
                }
            });

            // API change event
            $("#node-input-api").change(function() {
                console.log("API change event ..");
                showhideInputFields();
            });

            $("#node-input-symbolType").on("change", function() {
                console.log("detected a change in symbol type");
            });
            //value="flow" dir="" style="display: none;">

            $("#node-input-symbolType").change(function() {
                console.log("Node Input Symbol1 change detected");
            });

            // Symbol change event
            $("#node-input-symbol").on("change", function(type, value) {
                console.log("Node Input Symbol4 change is: ", type, value);
                if (value === "symbolslist") {
                    //hide the symbolslist typedInput
                    let typedInputContainerElement = $(
                        ".node-input-unified-api-symbol > .red-ui-typedInput-container"
                    );
                    let divselectSymbolElement = $(
                        ".node-input-select-symbol"
                    );

                    divselectSymbolElement.appendTo(
                        typedInputContainerElement
                    );

                    //find the button and hide it
                    let btnsymboltypedInput = typedInputContainerElement.find(
                        ".red-ui-typedInput-option-trigger"
                    );
                    //  btnsymboltypedInput.

                    // hide the typedInput button
                    btnsymboltypedInput.hide();
                    //show my select2 input
                    divselectSymbolElement.show();

                    //select the type drop down button
                    //$(".node-input-unified-api-symbol > .red-ui-typedInput-container > button").first();

                    //$(".node-input-unified-api-symbol").find(".red-ui-typedInput-container").find("button")
                } else {
                    let divselectSymbolElement = $(
                        ".node-input-select-symbol"
                    );
                    divselectSymbolElement.remove();
                    //divselectSymbolElement.hide();
                }
            });

            // order type change event
            $("#node-input-ordertype").change(function() {
                $("#node-input-ordertype option:selected").val() ===
                "market"
                    ? $("#node-input-orderprice").attr("readonly", true)
                    : $("#node-input-orderprice").attr("readonly", false);
            });
        },
        oneditsave: function() {
            var node = this;
            console.log("oneditsave ...");
            // this.exchange.value = $("#node-input-exchange option:selected").val();
            // node.exchange = $("#node-input-exchange option:selected").val();

            console.log("node exhange: " + node.exchange);
            console.log(
                "this selected: " +
                    $("#node-input-exchange option:selected").val()
            );
            console.log("node api: " + node.api);
            console.log(
                "this selected: " +
                    $("#node-input-api option:selected").val()
            );
            // make sure you save the dynamic fields
            node.exchange = $(
                "#node-input-exchange option:selected"
            ).val();
            node.api = $("#node-input-api option:selected").val();
            node.apiprivate = $("#node-input-api option:selected").attr(
                "isprivate"
            );
            if (
                $("#node-input-apitype option:selected").val() ===
                "customAPI"
            )
                if (
                    node.customapitype !==
                    $("#node-input-api option:selected").attr(
                        "customapitype"
                    )
                )
                    $("#node-input-customapitype").val(
                        $("#node-input-api option:selected").attr(
                            "customapitype"
                        )
                    );
            console.log("node exhange: " + node.customapitype);
            console.log(
                "this selected: " +
                    $("#node-input-exchange option:selected").val()
            );
            console.log("node api: " + node.api);
            console.log(
                "this selected: " +
                    $("#node-input-api option:selected").val()
            );
            console.log("this private", node.apiprivate);
        }
    });
</script>
<script type="text/x-red" data-template-name="ccxt-api">
        <div class="form-row">
        <span><a href='#' target="_blank" id="id-img-display-exchange-homepage"><img src="" alt="" id="id-anchor-display-exchange-img" style="max-width:68%;"></a></span>
    </div>


            <div class="form-row">

              <label for="node-input-exchange"><i class="fa fa-shopping-cart"></i> Exchange</label>
              <select type="text" id="node-input-exchange"
              data-toggle="tooltip" data-placement="right" data-animation="true"
              data-html="true" data-trigger="hover"
              title="select the exchange from the drop down list">

              </select>
              <span><a href='#' target="_blank" id="id-anchor-display-exchange-homepage"><i class="fa fa-globe"></i></a></span>

          </div>


            <div class="form-row">
              <label for="node-input-apitype"><i class="fa fa-dot-circle-o"></i> API Type</label>
              <select type="text" id="node-input-apitype" style="width: auto;">
                <option value="unifiedAPI">Unified API</option>
                <option value="customAPI">Exchange API</option>
              </select>


            </div>


            <div class="form-row">
              <label for="node-input-api"><i class="fa fa-code"></i> API Name</label>
              <select type="text" id="node-input-api" style="width: auto;">
              </select>
              <span><a href='#' target="_blank" id="id-anchor-display-exchange-apidoc"><i class="fa fa-info-circle"></i></a></span>
              <input type="hidden" id="node-input-customapitype">
            </div>


            <div class="form-row node-input-private-api" style="display: none;width:auto;">
              <label for="node-input-apisecrets"><i class="fa fa-user-secret"></i> Secrets</label>
              <input type="text" id="node-input-apisecrets">
            </div>



            <div class="form-row node-input-unified-api-load-markets" style="display: none;">
               <label for="node-input-loadmarketsreload"><i class="fa fa-refresh"></i> Reload</label>
               <input type="checkbox" id="node-input-loadmarketsreload">
            </div>




            <div class="form-row node-input-unified-api-symbol" style="display: none;">
               <label for="node-input-symbol"><i class="fa fa-exchange"></i> Symbol</label>
               <input type="text" id="node-input-symbol">
               <input type="hidden" id="node-input-symbolType">
            </div>


              <select type="text" id="id-input-select-symbol">
                  <option>1</option>
              </select>
         <!--    <div class="form-row class-input-select-symbol">

          </div> -->

            <div class="form-row node-input-unified-api-timeframe" style="display: none;">
                <label for="node-input-timeframe"><i class="fa fa-clock-o"></i> Time Frame</label>
                <select type="text" id="node-input-timeframe" style="width: auto;">
                   <option value="1m">1 Min</option>
                   <option value="5m">5 Min</option>
                   <option value="30m">30 Min</option>
                   <option value="1h">1 Hour</option>
                   <option value="1d">1 Day</option>
                </select>
             </div>

             <div class="form-row node-input-unified-api-since" style="display: none;">
                <label for="node-input-since"><i class="fa fa-table"></i> Since</label>
                <input type="date" id="node-input-since">
             </div>

            <div class="form-row node-input-unified-api-limit" style="display: none;">
                  <label for="node-input-limit"><i class="fa fa-filter"></i> Limit</label>
                  <input type="number" id="node-input-limit">
            </div>

               <div class="form-row node-input-unified-api-ordertype" style="display: none;">
                      <label for="node-input-ordertype"><i class="fa fa-handshake-o"></i> Type</label>
                      <select type="text" id="node-input-ordertype" style="width: auto;">
                         <option value="limit">Limit</option>
                         <option value="market">Market</option>
                      </select>
              </div>


              <div class="form-row node-input-unified-api-orderside" style="display: none;">
                      <label for="node-input-orderside"><i class="fa fa-balance-scale"></i> Side</label>
                      <select type="text" id="node-input-orderside" style="width: auto;">
                         <option value="buy">Buy</option>
                         <option value="sell">Sell</option>
                      </select>
              </div>

              <div class="form-row node-input-unified-api-amount" style="display: none;">
                      <label for="node-input-amount"><i class="fa fa-calculator"></i> Amount</label>
                      <input type="number" id="node-input-amount">
                   </div>

              <div class="form-row node-input-unified-api-orderprice" style="display: none;">
                          <label for="node-input-orderprice"><i class="fa fa-dollar"></i> Price</label>
                          <input type="number" id="node-input-orderprice">
              </div>

              <div class="form-row node-input-unified-api-orderid" style="display: none;">
                      <label for="node-input-orderid"><i class="fa fa-id-badge"></i> ID</label>
                      <input type="text" id="node-input-orderid">
              </div>

              <div class="form-row node-input-unified-api-code" style="display: none;">
                      <label for="node-input-code"><i class="fa fa-qrcode"></i> Currency</label>
                      <input type="text" id="node-input-code">
              </div>
              <div class="form-row node-input-unified-api-address" style="display: none;">
                      <label for="node-input-address"><i class="fa fa-address-book"></i> Address</label>
                      <input type="text" id="node-input-address">
              </div>
              <div class="form-row node-input-unified-api-tag" style="display: none;">
                      <label for="node-input-tag"><i class="fa fa-comment"></i> Tag</label>
                      <input type="text" id="node-input-tag">
              </div>

              <div class="form-row node-input-api-custom" style="display: none;">
                  <label for="node-input-apipayload"><i class="fa fa-envelope"></i> Payload</label>
                  <input type="json" id="node-input-apipayload" style="width:68%;" >
                  <input type="hidden" id="node-input-apipayloadType">
                </div>
                <div class="form-row">
                    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
                    <input type="text" id="node-input-name" data-i18n="[placeholder]node-red:common.label.name">
                  </div>
</script>

<script type="text/x-red" data-help-name="ccxt-api">
    <p>CCXT API</p>
    <h3>Inputs</h3>
    <dl class="message-properties">
       <dt>Exchange<span class="property-type">string</span></dt>
    </dl>

    <dl class="message-properties">
          <dt>API Type<span class="property-type">string</span></dt>
          <p>API Custom Type</p>
          <dd>Type list:
             <ul>
                 <li>Public</li>
                 <li>Private</li>
             </ul>
          </dd>
    </dl>

    <dl class="message-properties">
          <dt>API Name<span class="property-type">string</span></dt>
          <p>Each Exchange have a list of different APIs. Check the API dock for each Exchange to check it</p>
    </dl>

    <dl class="message-properties">
      <dt>ApiKey<span class="property-type">string</span></dt>
    </dl>
    <dl class="message-properties">
      <dt>Secret ApiKey<span class="property-type">string</span></dt>
    </dl>

    <h3>Outputs</h3>
    <dl class="message-properties">
       <dt>payload<span class="property-type">object</span></dt>
       <dd>The payload result object.
          <p>Object Format:</p>
          <ul>
             <li>error: error array</li>
             <li>result: object result</li>
           </ul>
       </dd>
    </dl>

    <h3>Error</h3>
    <dl class="message-properties">
       <dt>error<span class="property-type">string</span></dt>
       <dd>The error string.</dd>
    </dl>
    <h3>Details</h3>
    <p>The ccxt RED node is a collection of available crypto exchanges or exchange classes</p>
</script>

<script type="text/x-red" data-template-name="ccxt-exchange">
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i>Name</label>
        <input type="text" id="node-config-input-name" placeholder="Enter Exchange Name">
    </div>
    <div class="form-row">
        <label for="node-config-input-apikey"><i class="fa"></i>ApiKey</label>
        <input type="text" id="node-config-input-apikey" placeholder="Enter Exchange ApiKey">
    </div>
    <div class="form-row">
        <label for="node-config-input-secret"><i class="fa"></i>Secret</label>
        <input type="text" id="node-config-input-secret" placeholder="Enter Exchange Secret">
    </div>
</script>

<script type="text/x-red" data-help-name="ccxt-exchange">
    <p>Configuration for a connection to an CCXT exchange.</p>
</script>

<script type="text/javascript">
    RED.nodes.registerType("ccxt-exchange", {
        category: "config",
        defaults: {
            name: { value: "" }
        },
        credentials: {
            apikey: { value: "" },
            secret: { value: "" }
        },
        label: function() {
            if (this.name) {
                return this.name;
            }
        }
    });
</script>
